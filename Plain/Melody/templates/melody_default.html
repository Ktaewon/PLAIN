{% extends "base.html" %}
{% load static %}
{% block title %}submain 페이지{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/melody_default.css' %}" type="text/css">
{% endblock %}

{% block out_container_content %}
<script src="//cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.4.0/wavesurfer.min.js"></script>
<div class="container-all-1">
    <div class="container1">
        <div class="container1-1">
            <div class="container1-1-1">
                <div class="1">
                    <button onclick="wavesurfer.playPause()"><img class="button" src="{% static 'images/play-button.png' %}" alt=""></button>
                </div>
                <div class="2">
                    <div class="2-1"> {{melody.owner}}  <!--글쓰기--></div>
                    <div class="2-2">{{ melody.title}}  <!--제목--></div>
                </div>
            </div>
            <div class="container1-1-2">
                <div class="3">
                     <!--hashtags-->
                    {% for tag in melody.hashtags.all %}
                    <span class="badge badge-dark">
                    #{{ tag.name }}
                    </span>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="container1-2">
            <div class="4">
                <!--파형그리기-->
                <div id="waveform"></div>
                <script>
                    var wavesurfer = WaveSurfer.create({
                        // id="waveform" 인 오브젝트에 파형 생성
                        // 필수 옵션
                        container: '#waveform',
                        // 선택 옵션들 
                        waveColor: 'skyblue',
                        progressColor: 'purple',
                        barWidth: 3,
                    });
                    //var wav = new Audio("{% static 'audio/music.mp3' %}");
                    wavesurfer.load("{% static 'audio/music.mp3' %}");
        
                </script>
            </div>
        </div>
    </div>
    <div class="container2">
      <div class="5">
            <!--image받은 것!-->
            <img src={{melody.img.url}} alt="My Image" width="100" height="200">
      </div>
    </div>
</div>

<div class="container-all-2">
    <div class="6">네브 버튼들</div>
    <div class="7">

        <!--댓글한개-->
        {% for comment in comments %}
        <div class="card">
            <div class="card-body">
                <h5>{{comment.body}}</h5> <!--코멘트-->
                <h6>작성자 : {{comment.writer}} 날짜 : {{comment.pub_date}}</h6> <!--작성자랑 정보-->
                <audio src="{% static 'audio/music.mp3' %}" autoplay loop controls id="myAudio">오디오 지원되지 않는 브라우저</audio>  <!--오디오파일-->
            
            </div>
        </div>
        {% endfor %}
        <br><br>

        <!--댓글작성 폼-->
        <form method="POST" action="{% url 'comment' melody.id %}">
            {% csrf_token %}
            <textarea cols=125 rows=2 name="body">leave a message</textarea>
            <audio src="" id="audio_section" controls>오디오 플레이어가 지원되지 않습니다.</audio>
            <input class="btn btn-dark" type="submit" value="댓글 달기!">
        </form>

        

    </div>
</div>

{% endblock %}

{% block in_container_content %}

{% endblock %}

